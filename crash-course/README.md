# Primary Functionality
- Architecture - Class Based , function Based
- client vs server side components
- Rendering ( Client-side rendering and Server-side rendering)

- improve seo
- Routing - File Based
- serverless functions
- Automatic code splitting (load time evaluation)
- Font optimize and Image Optimizing Cdn support
- Thired party 
- Cutting Edge
- SEO
- Fast
- Hot Module 


## By default
- server component by default = server render on server
- Database , direct access of Server Component
- use client

- client render on both server and browser as well for pre rendering


## Routing


## Dynamic routing
user1 / user2 


## Layout 


## route group


## Data Fetching
- fetch data
- server side fetching - banifit FCP and benifit 
- better seo
- client side not fetched -ve impact
- server side simply 
- improve secure
- reduced network waterfall


## Loading


## Error Handlig
- Error.ts

## Forbidden

## Unauthorized special files

## Api Routes


## Caching
- storing data temperory
- caching
### Browser cache
- saves static files locally
### server cache
- Stores pre-rendered pages & API responses
### Data cache
- Remembers fetched data to avoid repeat requests

- SSG ISR PPR
what get cached

- next config 
cacheComponent: true
"use cache"

- use when input don't change

- Prerenders it at build time
- Stores it in memory
- Revalidates it automatically


### File level
```ts
//File level
"use cache"
export default async function Page() {
   //
}
```
### Function level
```ts
//Component level
"use cache"
export async function MyComponent() {
   'use cache'
   return <> </>
}
```
### Function level
```ts
//File level
export default async function getData() {
    "use cache"
    const data = await fetch("/api/data").then(r => r.json())
    return data
}
```
- Final tune cacheLife()
```ts
'use cache'
import {unstable_cacheLife as cacheLife } from "next/cache";

export default async function CachedProductCard({productId} : {productId: string}) {
    cacheLife("hours")
    const product = await fetch(`https://api.example.com/products/${productId}`).then(res => res.json())

    return (
        <div className='p-4 bg-white shadow-xl rounded-lg">
            <h2 className="text-xl font-bold">{product.name}</h2>
            <p>Price: ${product.price}</p>
        </div>
    )

}
```

```ts
// config.ts //next
cacheLife: {
    twoweeks: {
        stale: 60*5,
        revalidate: 60*60*24*14,
        expire: 60*60*24*365
    },
}
```

### Cache Tag
```ts
import {cacheTag} from "next/cache"


export async function getData() {
    'use cache'
    cacheTag('my-data')

    const data = await fetch('/api/data')
    return data
}
```

- cacheLife - when to clear
- cacheTag - what to clear

- revalidate() - revalidateTag() -  refresh constant instantly

### PPR (Partial Pre-Rendering)
- not need config for ppr true in nextconfig
- The Tackaway
- different 
- precise versions
- better performance


### Build Adapters API
- Build pipline
- build for diff env we can tell to.
- Modify your next.js config
- optimize the final build ouput
- Adjust how your app runs
- Zero config deployments
- environment-specific optimizations
- Freedom from being tied to one provider


### MetaData SEO
- Config based 
- static metadata
```ts
export const metadata = {
    title: "Home | Next.js",
    desciption: "Generated by create next app",
    openGraph: {
        ...openGraphImage,
        title: 'Home',
    }
}
```

- Dynamic Metadata
```ts
export async function generateMetadata({params}) {
    const {id} = params;
    const resource = await getResourceById({id})

    const title = resource.title + " | Platform";

    const seoDescription = "Free resources database containing ebooks, guides and videos";


    return{
        title,
        desciption: seoDescription,
        other: {
            "og:title": title,
            "og:description": seoDesciption,
            "og:image":resource.image,
            "twitter:title":title,
            "twitter:image":resource.image,
            "twitter:description":seoDescription,

        }
    }
}

export default function Page({params, searchParams}) {

}
```

### File based Metadata
```ts
// app/robots.txt
User-Agent: *
Allow: /
Disallow: /private/

Sitemap: https://acme.com/sitemap.xml

// favicon
// File convertion | Supported file types | Valid locations
favicon | .icon | app
icon | .ico, .jpg, .jpeg, .png, .svg | app/**/*
apple-icon | .ico, .jpg, .jpeg, .png, .svg | app/**/*
```

### File convention Supported file types
opengraph-image | .jpg, .jpeg, .png , .gif
twitter-image | .jpg, .jpeg, .png , .gif
opengraph-image.alt | .txt
twiter-image.alt | .txt

### 
Route  | URL  | params
app/shop/icon.js | / shop | undefined
app/shop/[slug]/icon.js | / shop/1 | {slug: '1'}
app/shop/[tag]/[item]/icon.js | /shop/1/2 | {tag: '1', item: '2'}
